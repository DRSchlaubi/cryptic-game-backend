plugins {
    id 'java'
}

group 'net.cryptic-game'
version '0.3.0'

subprojects {
    sourceCompatibility = targetCompatibility = 1.11

    repositories {
        mavenCentral()
    }

    task copyDependencies(type: Copy) {
        into new File(buildDir, 'dependencies')
        from sourceSets.main.compileClasspath.collect { it.absolutePath }
    }
    assemble.finalizedBy copyDependencies

    jar {
        manifest.attributes(
                'Implementation-Title': project.name,
                'Implementation-Version': project.version,
                'Class-Path': sourceSets.main.compileClasspath.collect { "dependencies/${it.getName()}" }.join(' ')
        )
    }

}
