buildscript {
    repositories {
        jcenter()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }

    dependencies {
        classpath 'com.netflix.nebula:gradle-aggregate-javadocs-plugin:2.2.+'
    }
}

plugins {
    id 'java'
    id 'application'
}

apply plugin: 'nebula-aggregate-javadocs'

group 'net.cryptic-game'
version '0.3.0'

application {
    mainClassName = ""
}

subprojects {
    version project.parent.version
    sourceCompatibility = targetCompatibility = 1.11

    repositories {
        mavenCentral()
    }
}

task cleanDocs(type: Delete) {
    delete "$projectDir/docs/javadoc/$version/"
    delete "$projectDir/docs/javadoc/latest/"
}

task updateDocsStyles(type: Copy, dependsOn: cleanDocs) {
    from "$projectDir/gradle/javadoc/"
    into "$project.buildDir/docs/javadoc/"
}

task createDocs(type: Copy, dependsOn: updateDocsStyles) {
    def docs = file("$project.buildDir/docs/javadoc/")
    into "$projectDir/docs/javadoc/"

    from(docs) {
        into "$version/"
    }
    from(docs) {
        into "latest/"
    }
}
